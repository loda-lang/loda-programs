; A143666: (0, 1, 2, 3, 2^2, 5, 2*3, 7, 2^3, 3^2, 2*5, 11, 2^2*3, 13,..) becomes (0^1*2, 3^2*2, 5^2*3, 7^2*3, 3^2*2, 5^11*2, 2^3*13,..).
; Submitted by loader3229
; 0,18,75,147,18,97656250,104,384,100,867,1048576,96,539,1587,486,24576,18,6439811511626359453675214,7533,96,2057,156250,16,26011,3188646,9963,56,3698,2662,575,8836,4374,64,258280326,434176,24,97656250,6561,10469
; Formula: a(n) = A348477(3*n-1)*truncate((-(A348477(max(3*n-3,1))==1)+A348477(max(3*n-3,1)))^A348477(3*n-2))

#offset 1

sub $0,1
mul $0,3
mov $1,$0
mov $2,$0
max $0,1
seq $0,348477 ; Drop all 1 but the first 1 in A035306.
add $1,1
seq $1,348477 ; Drop all 1 but the first 1 in A035306.
add $2,2
seq $2,348477 ; Drop all 1 but the first 1 in A035306.
mov $3,$0
equ $3,1
sub $0,$3
pow $0,$1
mul $0,$2
