; A165527: Number of permutations of length n which avoid the patterns 4231 and 2143.
; Submitted by loader3229
; 1,1,2,6,22,86,335,1271,4680,16766,58656,201106,677767,2251011,7382992,23955716,77010180,245577076,777648145,2447486221,7661760386,23872087936,74071120682,228988898916,705618033237,2168073549821,6644571015750,20317533778906,62000337065210,188856280270026,574337936271291,1744123015407291,5289648114432772,16024176783735546,48492741387616732,146614498739181326,442912937849441195,1337022476778097711,4033402988183656100,12160382391334694856,36643129136110211896,110365101170212825496
; Formula: a(n) = b(n-1), b(n) = c(n-4), b(6) = 335, b(5) = 86, b(4) = 22, b(3) = 6, b(2) = 2, b(1) = 1, b(0) = 1, c(n) = truncate((c(n-1)*((n-1)*(834*n-2695)+604)+c(n-2)*((n-1)*(-2901*n+8127)-2220)+c(n-3)*((n-1)*(4533*n-9643)+3748)+c(n-4)*((n-1)*(-3010*n+3093)-2602)+c(n-5)*((n-1)*(633*n+72)+642))/((n-1)*(89*n-314)+64)), c(8) = 677767, c(7) = 201106, c(6) = 58656, c(5) = 16766, c(4) = 4680, c(3) = 1271, c(2) = 335, c(1) = 86, c(0) = 22

#offset 1

mov $2,1
mov $3,1
mov $4,2
mov $5,6
mov $6,22
sub $0,1
lpb $0
  mov $8,633
  mul $8,$1
  add $8,705
  mul $8,$1
  add $8,642
  mul $2,$8
  rol $2,5
  mov $8,-3010
  mul $8,$1
  add $8,83
  mul $8,$1
  sub $8,2602
  mov $7,$2
  mul $7,$8
  mov $8,4533
  mul $8,$1
  sub $8,5110
  mul $8,$1
  add $8,3748
  add $6,$7
  mov $7,$3
  mul $7,$8
  mov $8,-2901
  mul $8,$1
  add $8,5226
  mul $8,$1
  sub $8,2220
  add $6,$7
  mov $7,$4
  mul $7,$8
  mov $8,834
  mul $8,$1
  sub $8,1861
  mul $8,$1
  add $8,604
  add $6,$7
  mov $7,$5
  mul $7,$8
  mov $8,89
  mul $8,$1
  sub $8,225
  mul $8,$1
  add $8,64
  add $6,$7
  div $6,$8
  sub $0,1
  add $1,1
lpe
mov $0,$2
