; A160412: Number of "ON" cells at n-th stage in simple 2-dimensional cellular automaton (see Comments for precise definition).
; Submitted by [SG]KidDoesCrunch
; 0,3,12,21,48,57,84,111,192,201,228,255,336,363,444,525,768,777,804,831,912,939,1020,1101,1344,1371,1452,1533,1776,1857,2100,2343,3072,3081,3108,3135,3216,3243,3324,3405,3648,3675,3756,3837,4080,4161,4404,4647,5376,5403,5484,5565,5808,5889,6132,6375,7104,7185,7428,7671,8400,8643,9372,10101,12288,12297,12324,12351,12432,12459,12540,12621,12864,12891,12972,13053,13296,13377,13620,13863
; Formula: a(n) = b(max(2*n-1,0)), b(n) = 3^sumdigits(n,2)+b(n-2), b(1) = 3, b(0) = 0

mul $0,2
sub $0,1
lpb $0
  mov $3,$0
  dgs $3,2
  trn $0,2
  mov $2,3
  pow $2,$3
  add $1,$2
lpe
mov $0,$1
