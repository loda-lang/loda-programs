; A000517: Number of permutations of length n with exactly three valleys.
; Submitted by loader3229
; 272,7936,137216,1841152,21253376,222398464,2174832640,20261765120,182172651520,1594922762240,13684856848384,115620218667008,965271355195392,7984436548730880,65569731961159680,535438370914959360,4353038473793372160,35266789418949672960,284940041496433786880,2297255485017067356160,18489840364946532073472,148621728533690781270016,1193384833751084963987456,9574700804298603161976832,76770268192416379181203456,615239656078279345694572544,4928631403942459639595008000,39470830070296238581077770240
; Formula: a(n) = b(n-7), b(n) = c(n-4), b(6) = 2174832640, b(5) = 222398464, b(4) = 21253376, b(3) = 1841152, b(2) = 137216, b(1) = 7936, b(0) = 272, c(n) = truncate((c(n-1)*((n-1)*(550*n+4590)+11760)+c(n-2)*((n-1)*(-5020*n-43920)-116072)+c(n-3)*((n-1)*(21800*n+201464)+553632)+c(n-4)*((n-1)*(-44832*n-444768)-1288608)+c(n-5)*((n-1)*(34560*n+380160)+1209600))/((n-1)*(23*n+184)+460)), c(8) = 965271355195392, c(7) = 115620218667008, c(6) = 13684856848384, c(5) = 1594922762240, c(4) = 182172651520, c(3) = 20261765120, c(2) = 2174832640, c(1) = 222398464, c(0) = 21253376

#offset 7

mov $2,272
mov $3,7936
mov $4,137216
mov $5,1841152
mov $6,21253376
sub $0,7
lpb $0
  mov $8,34560
  mul $8,$1
  add $8,414720
  mul $8,$1
  add $8,1209600
  mul $2,$8
  rol $2,5
  mov $8,-44832
  mul $8,$1
  sub $8,489600
  mul $8,$1
  sub $8,1288608
  mov $7,$2
  mul $7,$8
  mov $8,21800
  mul $8,$1
  add $8,223264
  mul $8,$1
  add $8,553632
  add $6,$7
  mov $7,$3
  mul $7,$8
  mov $8,-5020
  mul $8,$1
  sub $8,48940
  mul $8,$1
  sub $8,116072
  add $6,$7
  mov $7,$4
  mul $7,$8
  mov $8,550
  mul $8,$1
  add $8,5140
  mul $8,$1
  add $8,11760
  add $6,$7
  mov $7,$5
  mul $7,$8
  mov $8,23
  mul $8,$1
  add $8,207
  mul $8,$1
  add $8,460
  add $6,$7
  div $6,$8
  sub $0,1
  add $1,1
lpe
mov $0,$2
