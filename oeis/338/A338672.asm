; A338672: Number of n-step closed walks on kagome lattice.
; Submitted by loader3229
; 1,0,4,4,28,60,264,784,3004,10204,37824,135784,502784,1851200,6901696,25766144,96797244,364655100,1379120400,5230011896,19890313128,75823622984,289698620336,1109059301536,4253731156128,16342545417760,62885474132992,242331022479040,935085717105792,3612737418620032,13974224404904704,54111837809231872,209749225894586940,813813400498459068,3160392636817497904,12283621573605700504,47781563422673386712,186004674804944925496,724601930721712463888,2824692234135180141984,11018536653970267519944
; Formula: a(n) = b(n-3), a(6) = 264, a(5) = 60, a(4) = 28, a(3) = 4, a(2) = 4, a(1) = 0, a(0) = 1, b(n) = c(n-1), b(6) = 10204, b(5) = 3004, b(4) = 784, b(3) = 264, b(2) = 60, b(1) = 28, b(0) = 4, c(n) = d(n-1), c(6) = 37824, c(5) = 10204, c(4) = 3004, c(3) = 784, c(2) = 264, c(1) = 60, c(0) = 28, d(n) = truncate((b(n-1)*((n-1)*((n-1)*(-90*n-858)-3322)-3824)+b(n-2)*((n-1)*((n-1)*(180*n+1072)+2416)+800)+b(n-3)*((n-1)*((n-1)*(216*n+1576)+4696)+3776)+b(n-4)*((n-1)*((n-1)*(-288*n-1216)-2144)-928)+c(n-1)*((n-1)*((n-1)*(-27*n-190)-304)+598)+d(n-1)*((n-1)*((n-1)*(9*n+107)+500)+730))/((n-1)*(5*n+55)+180)), d(8) = 1851200, d(7) = 502784, d(6) = 135784, d(5) = 37824, d(4) = 10204, d(3) = 3004, d(2) = 784, d(1) = 264, d(0) = 60

mov $2,1
mov $4,4
mov $5,4
mov $6,28
mov $7,60
lpb $0
  mov $9,-288
  mul $9,$1
  sub $9,1504
  mul $9,$1
  sub $9,2144
  mul $9,$1
  sub $9,928
  mul $2,$9
  rol $2,6
  mov $9,216
  mul $9,$1
  add $9,1792
  mul $9,$1
  add $9,4696
  mul $9,$1
  add $9,3776
  mov $8,$2
  mul $8,$9
  mov $9,180
  mul $9,$1
  add $9,1252
  mul $9,$1
  add $9,2416
  mul $9,$1
  add $9,800
  add $7,$8
  mov $8,$3
  mul $8,$9
  mov $9,-90
  mul $9,$1
  sub $9,948
  mul $9,$1
  sub $9,3322
  mul $9,$1
  sub $9,3824
  add $7,$8
  mov $8,$4
  mul $8,$9
  mov $9,-27
  mul $9,$1
  sub $9,217
  mul $9,$1
  sub $9,304
  mul $9,$1
  add $9,598
  add $7,$8
  mov $8,$5
  mul $8,$9
  mov $9,9
  mul $9,$1
  add $9,116
  mul $9,$1
  add $9,500
  mul $9,$1
  add $9,730
  add $7,$8
  mov $8,$6
  mul $8,$9
  mov $9,5
  mul $9,$1
  add $9,60
  mul $9,$1
  add $9,180
  add $7,$8
  div $7,$9
  sub $0,1
  add $1,1
lpe
mov $0,$2
